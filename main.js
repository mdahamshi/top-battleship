(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],o=0;o<e.length;o++){var l=e[o],d=r.base?l[0]+r.base:l[0],c=i[d]||0,u="".concat(d," ").concat(c);i[d]=c+1;var p=n(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var m=a(h,r);r.byIndex=o,t.splice(o,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=n(i[s]);t[o].references--}for(var l=r(e,a),d=0;d<i.length;d++){var c=n(i[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},89:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(601),a=n.n(r),i=n(314),s=n.n(i)()(a());s.push([e.id,".dialog-close {\n  align-self: flex-end;\n  padding: 10px;\n  position: absolute;\n  margin: 16px;\n  top: 0;\n  right: 0;\n}\n\n.dialog-modal {\n  margin: auto;\n  width: 100%;\n  padding: 32px 20px;\n  border-radius: 6px;\n  border: none;\n}\n\n::backdrop {\n  background-color: black;\n  opacity: 0.7;\n}\n\n@media only screen and (min-width: 700px) {\n  .dialog-modal {\n    max-width: 400px;\n  }\n}\n",""]);const o=s},102:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(601),a=n.n(r),i=n(314),s=n.n(i)()(a());s.push([e.id,'.battlefield {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 1rem;\n  font-family: sans-serif;\n}\n\n.grid-board {\n  display: grid;\n  grid-template-columns: 2em repeat(10, 2em);\n  grid-template-rows: 2em repeat(10, 2em);\n  background-color: #ccc;\n}\n\n.cell {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  outline: 1px solid #b4b4ff;\n  font-size: 0.8em;\n  position: relative;\n}\n\n#pc-board .cell:not(.marker):hover {\n  background: gainsboro;\n  cursor: pointer;\n}\n\n.cell.marker {\n  font-weight: bold;\n  outline: transparent;\n}\n\n.ship {\n  background: #2b7;\n}\n\n#player-board .cell[data-type="ship"] {\n  background: #2b7;\n  outline: none;\n}\n\n.cell[data-type="hit"]::after {\n  content: "✕"; /* Unicode X character */\n  color: red;\n  font-size: 1.5em;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n}\n.cell[data-type="missed"]::after {\n  content: "";\n  width: 0.6em;\n  height: 0.6em;\n  background-color: gray;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n}\n\n.cell[data-type="missed"],\n.cell[data-type="hit"] {\n  pointer-events: none;\n  cursor: default;\n  opacity: 0.8;\n}\n\n#pc-board.disabled {\n  pointer-events: none;\n  opacity: 0.6;\n  filter: grayscale(0.5);\n  cursor: not-allowed;\n}\n',""]);const o=s},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},258:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(601),a=n.n(r),i=n(314),s=n.n(i)()(a());s.push([e.id,"form.flex-col {\n  gap: 8px;\n}\nform h2 {\n  margin-bottom: 16px;\n}\nform input,\nform select {\n  background-color: #ffffff;\n  border: 1px solid var(--lite-gray);\n  border-radius: 3px;\n  width: 100%;\n  padding: 5px;\n  font-size: 14px;\n  outline: none;\n  margin-bottom: 24px;\n}\nform input:invalid {\n  border: 1px solid #d55c5f;\n  color: #d55c5f;\n  box-shadow: none;\n}\nform input:focus {\n  border: 1px solid var(--sb-theme-color);\n  box-shadow: 0 0 5px var(--sb-theme-color);\n}\nbutton.sb-button {\n  align-self: center;\n}\n",""]);const o=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&s[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},365:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(601),a=n.n(r),i=n(314),s=n.n(i)()(a());s.push([e.id,'* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family:\n    sans-serif,\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    "Segoe UI",\n    Roboto,\n    Oxygen,\n    Ubuntu,\n    Cantarell,\n    "Open Sans",\n    "Helvetica Neue",\n    sans-serif;\n}\n\n:root {\n  --lite-gray: #f0f1f4;\n  --label-width: 120px;\n  --sb-theme-color: #3080e8;\n  --sb-conent-bg: #fcf9f8;\n  --sb-corner-radius: 12px;\n  --sb-padding: 16px;\n  --sb-border-color-thin: #f0f1f4;\n}\n\nbody {\n  height: 100dvh;\n  display: flex;\n  flex-direction: column;\n  max-width: 980px;\n  margin: auto;\n}\n\nfooter {\n  margin-top: auto;\n  padding: 8px;\n}\n\n.flex-row {\n  display: flex;\n  gap: 25px;\n  align-items: center;\n}\n\n.flex-col {\n  display: flex;\n  flex-direction: column;\n  gap: 25px;\n}\n\nbutton:hover {\n  filter: brightness(1.1);\n  cursor: pointer;\n  transform: scale(1.03);\n  transition: all 0.3s ease;\n}\n\nbutton:focus-visible,\nbutton:focus {\n  outline: none;\n}\n\nbutton {\n  cursor: pointer;\n}\n\nbutton.sb-button {\n  border-radius: var(--sb-corner-radius);\n  color: white;\n  background-color: var(--sb-theme-color);\n  padding: 10px;\n  outline: none;\n  font-weight: bold;\n  font-size: 16px;\n  max-width: 200px;\n  border: none;\n  white-space: nowrap;\n}\n#content {\n  align-items: center;\n}\nbutton:active,\n.clickable:active {\n  filter: brightness(0.9);\n  transform: scale(0.98);\n}\n#boards {\n  justify-content: center;\n}\n\n#message {\n  text-align: center;\n  color: black;\n  border: 2px solid var(--sb-theme-color);\n  border-radius: 4px;\n  padding: 6px;\n  color: var(--sb-theme-color);\n  align-self: center;\n}\nheader nav button {\n  font-size: 16px;\n  border: none;\n  background-color: rgb(255, 255, 255);\n}\n',""]);const o=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0;var r=n(72),a=n.n(r),i=n(825),s=n.n(i),o=n(659),l=n.n(o),d=n(56),c=n.n(d),u=n(540),p=n.n(u),h=n(113),m=n.n(h),f=n(365),g={};g.styleTagTransform=m(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=p(),a()(f.A,g),f.A&&f.A.locals&&f.A.locals;const b=(new Date).getFullYear();function v(e=""){return`${e?e+"-":""}${crypto.randomUUID().slice(0,8)}`}function y(e="This Website"){const t=document.querySelector("footer");if(!t)return;const n=document.createElement("div"),r=document.createElement("p");r.style.textAlign="center",r.innerHTML=`\n    ${e} © ${b}<br>\n    Built with love by \n    <a href="https://sarawebs.com" style="color: #207de9;text-decoration: none;">SaraWebs</a>\n  `,n.appendChild(r),t.appendChild(n)}function x(e,t,n){const r=[];for(let a=0;a<e;a++){r[a]=[];for(let e=0;e<t;e++)n(r[a],a,e)}return r}class w{constructor(e){this.el=document.createElement(e)}addClass(...e){return this.el.classList.add(...e),this}setId(e){return this.el.id=e,this}setText(e){return this.el.textContent=e,this}setAttr(e,t){return this.el.setAttribute(e,t),this}on(e,t){return this.el.addEventListener(e,t),this}append(e){return this.el.appendChild(e instanceof w?e.build():e),this}build(){return this.el}}function A({labelText:e,inputType:t,id:n,name:r,required:a=!1}){const i=new w("label").setAttr("for",n).setText(e),s=new w("input").setAttr("type",t).setAttr("id",n).setAttr("name",r);return a&&s.setAttr("required",""),[i,s]}const C={generateID:v,addCopyRight:y,createBoard:x,getRandomColor:function(e){const t=Array.isArray(e)&&e.length>0?e:["#8e1330","#8a6c1d","#406555","#7c0e45","#8d1978","#181770","#cc38d7","#47504e","#0fa080","#0f64a0","#460fa0","#a00f65","#a00f24","#0f94a0","#0fa067","#0fa03c","#38a00f","#a09d0f","#a0670f","#a0370f","#a00f0f","#2b634d","#2b4c63","#2e6bc6","#1992d4"];return t[Math.floor(Math.random()*t.length)]},ElementBuilder:w,labelAndInput:A};"undefined"!=typeof window&&(window.sb=C);class E{#e=null;#t=0;#n;constructor(e){this.#e=e,this.#n=v("ship")}get length(){return this.#e}hit(){return this.#t++,this.#t}isSunk(){return this.#t>=this.#e}getID(){return this.#n}}class S{#r;#n;static MISSED="missed";static HIT="hit";constructor(e=""){this.#r=e,this.#n=v("cell")}getType(){return this.isEmpty()?"empty":this.isShip()?"ship":this.isHit()?"hit":this.isMissed()?"missed":void 0}setValue=e=>this.#r=e;setMissed=()=>this.#r=S.MISSED;setHit=()=>this.#r=S.HIT;isShip=()=>this.#r instanceof E;isMissed=()=>this.#r===S.MISSED;isHit=()=>this.#r===S.HIT;getID=()=>this.#n;isEmpty=()=>""===this.#r;getValue=()=>this.#r}class M{static HORAIZONAL="H";static VERTICAL="V";#a=10;#i=[];#s=[];#o=[];#l=[];#n;constructor(e=10){this.#l=x(e,e,e=>e.push(new S)),this.#a=e,this.#n=v("board")}getID(){return this.#n}getCordinate(e,t){return this.#l[e][t]}getCell(e,t){return this.#l[e][t]}insertShip(e,t,n,r=M.HORAIZONAL){if(!(e instanceof E&&this.isValid([t,n])))return null;let a=r.toUpperCase();const i=e.length,s={H:([e,r])=>{let a=[],s=[e,r+i-1];if(!this.isValid(s))return null;for(let e=n;e<n+i;e++){if(!this.isEmpty(t,e))return null;a.push([t,e])}return a},V:([e,r])=>{let a=[],s=[e+i-1,r];if(!this.isValid(s))return null;for(let e=t;e<t+i;e++){if(!this.isEmpty(e,n))return null;a.push([e,n])}return a}}[a]([t,n]);return s?(s.forEach(([t,n])=>this.getCell(t,n).setValue(e)),this.#i.push(e),e):null}isEmpty(e,t){return this.getCell(e,t).isEmpty()}isValid(e){return e[0]<this.#a&&e[1]<this.#a&&e[0]>=0&&e[1]>=0}receiveAttack(e,t){const n=this.getCell(e,t);return n.isShip()?(n.getValue().hit(),n.setHit(),this.#o.push([e,t]),!0):!!n.isEmpty()&&(n.setMissed(),this.#s.push([e,t]),!0)}allShipsSunk(){return this.#i.every(e=>e.isSunk())}getBoard(){return this.#l}printBoard=()=>{const e=this.#l.map(e=>e.map(e=>e.getValue()));console.table(e)};getRandomCord(e=this.size()){return[Math.floor(Math.random()*e),Math.floor(Math.random()*e),Math.round(Math.random())?M.HORAIZONAL:M.VERTICAL]}size(){return this.#a}}class B{#n;#l;name;previousMoves=[];constructor(e="Player",t=10){this.#n=v("player"),this.name=e,this.#l=new M(t)}attack(e,t,n){return!this.movePlayed(e,t)&&(this.previousMoves.push([e,t]),n.receiveAttack(e,t))}movePlayed(e,t){return this.previousMoves.some(([n,r])=>n===e&&r===t)}getBoard=()=>this.#l;getID=()=>this.#n;getName=()=>this.name}class I extends B{availableMoves=[];constructor(e=10){super("Computer",e),this.prepareMoves(this.getBoard().size())}randomAttack(e){return this.attack(e)}attack(e){if(0===this.availableMoves.length)return!1;const[t,n]=this.availableMoves.pop();return super.attack(t,n,e)}prepareMoves(e){for(let t=0;t<e;t++)for(let n=0;n<e;n++)this.availableMoves.push([t,n]);for(let e=this.availableMoves.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.availableMoves[e],this.availableMoves[t]]=[this.availableMoves[t],this.availableMoves[e]]}}}class T{static shipLengths=[1,1,1,2,2,3,3,4];constructor(e,t=10){this.player=new B(e,t),this.pc=new I(t),this.activePlayer=this.player,this.gameEnd=!1}buildBoardRand(e){T.shipLengths.forEach(t=>{const n=new E(t);let r=null;for(;null===r;){const[t,a,i]=e.getRandomCord();r=e.insertShip(n,t,a,i)}})}getPlayer(){return this.player}getPC(){return this.pc}getActivePlayer=()=>this.activePlayer;switchPlayer(){this.activePlayer===this.player?this.activePlayer=this.pc:this.activePlayer=this.player}playRound(e,t){const n=this.getActivePlayer();let r=this.player.getBoard();return n===this.player?(r=this.pc.getBoard(),n.attack(e,t,r)):n.attack(r),r.allShipsSunk()?(this.gameEnd=!0,this.winner=n.getName(),n.getName()):(this.switchPlayer(),null)}}class k{constructor(e="Sara"){const t=new T(e);t.buildBoardRand(t.getPlayer().getBoard()),t.buildBoardRand(t.getPC().getBoard()),this.game=t,this.playerBoard=this.game.getPlayer().getBoard(),this.pcBoard=this.game.getPC().getBoard()}}var P=n(102),N={};function L(e,t="Your grid"){const n=document.getElementById(e);n.innerHTML="";const r=document.createElement("div");r.className="battlefield flex-col";const a=document.createElement("div");a.className="battlefield-label",a.textContent=t,r.appendChild(a);const i=document.createElement("div");i.className="grid-board";const s="ABCDEFGHIJ".split(""),o=document.createElement("div");o.className="cell marker",i.appendChild(o);for(let e=0;e<10;e++){const t=document.createElement("div");t.className="cell marker",t.textContent=s[e],i.appendChild(t)}for(let e=0;e<10;e++){const t=document.createElement("div");t.className="cell marker row-marker",t.textContent=e+1,i.appendChild(t);for(let t=0;t<10;t++){const n=document.createElement("div");n.className="cell",n.dataset.row=e,n.dataset.col=t,i.appendChild(n)}}return r.appendChild(i),n.appendChild(r),n}N.styleTagTransform=m(),N.setAttributes=c(),N.insert=l().bind(null,"head"),N.domAPI=s(),N.insertStyleElement=p(),a()(P.A,N),P.A&&P.A.locals&&P.A.locals;var H=n(89),R={};R.styleTagTransform=m(),R.setAttributes=c(),R.insert=l().bind(null,"head"),R.domAPI=s(),R.insertStyleElement=p(),a()(H.A,R),H.A&&H.A.locals&&H.A.locals;var z=n(258),D={};D.styleTagTransform=m(),D.setAttributes=c(),D.insert=l().bind(null,"head"),D.domAPI=s(),D.insertStyleElement=p(),a()(z.A,D),z.A&&z.A.locals&&z.A.locals,n.p;const O=n.p+"d5f7de4f307667e20be6.png";class V{constructor(e){y(e),this.content=document.getElementById("content"),document.querySelector("title").textContent=e,document.getElementById("logo-name").textContent=e,this.player_board=L("player-board","Your board"),this.pc_board=L("pc-board","PC"),this.message=document.getElementById("message"),this.initNameForm(),document.querySelector("#user-img").src=O}initNameForm(){this.dialog=function(){const e=new w("div").setId("dialog-content"),t=new w("button").setId("dialog-close").addClass("sb-button","dialog-close").setAttr("autofocus","").setText("X"),n=new w("div").addClass("flex-col").append(t).append(e),r=new w("dialog").setId("dialog-modal").addClass("dialog-modal").append(n);return t.on("click",e=>r.build().close()),r.build()}(),document.body.insertBefore(this.dialog,this.content),this.dialog.content=document.getElementById("dialog-content"),this.dialog.content.innerHTML="",this.nameForm=function(){const e=new w("form").setId("form-name").addClass("flex-col").setAttr("method","post").append(new w("h2").setText("Enter your name"));return[...A({labelText:"Name",inputType:"text",id:"player-name",name:"player-name",required:!0})].forEach(t=>e.append(t)),e.append(new w("button").addClass("sb-button").setAttr("type","submit").setAttr("id","button-start-game").setText("Start Game")),e.build()}(),this.dialog.content.appendChild(this.nameForm),this.dialog.showModal()}updateMessage(e){this.message.textContent=e}pcBoard(e){"enable"===e?this.pc_board.classList.remove("disabled"):this.pc_board.classList.add("disabled")}renderBoard(e,t){const n=t.getBoard(),r=n.getBoard().length,a=n.getBoard()[0].length;e.querySelector(".battlefield-label").textContent=`${t.getName()}'s board`;for(let t=0;t<r;t++)for(let r=0;r<a;r++){const a=e.querySelector(`.cell[data-row="${t}"][data-col="${r}"]`),i=n.getCell(t,r);a.dataset.type=i.getType()}}}new class{constructor(e){this.view=new V(e),this.appName=e,this.init(),this.initBoardEvents(this.view.pc_board)}init(e){this.model=new k(e),this.game=this.model.game,this.view.renderBoard(this.view.player_board,this.game.getPlayer()),this.view.renderBoard(this.view.pc_board,this.game.getPC())}initBoardEvents(e){e.addEventListener("click",e=>{const t=e.target;if(t.dataset.row){if(this.view.pcBoard("disabled"),this.game.playRound(t.dataset.row,t.dataset.col),this.view.renderBoard(this.view.pc_board,this.game.getPC()),this.game.gameEnd)return this.view.updateMessage(`${this.game.winner} WON !`),void this.view.pcBoard("disabled");this.view.updateMessage("PC turn..."),setTimeout(()=>{this.game.playRound(0,0),this.view.renderBoard(this.view.player_board,this.game.getPlayer()),this.view.pcBoard("enable"),this.view.updateMessage("Your turn...")},600)}}),document.getElementById("btn-restart").addEventListener("click",e=>{e.preventDefault(),this.init(this.name)}),document.getElementById("button-start-game").addEventListener("click",e=>{e.preventDefault();const t=this.view.nameForm.elements["player-name"].value.trim();this.name=t,this.init(t),this.view.dialog.close()})}}("SaraShips")})();